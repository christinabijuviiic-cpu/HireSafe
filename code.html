<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ScamWatch | Intelligence & Protection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        html {
            scroll-behavior: smooth;
        }

        @keyframes meshGradient {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .mesh-bg {
            background: linear-gradient(-45deg, #0f172a, #1e293b, #dc2626, #0f172a);
            background-size: 400% 400%;
            animation: meshGradient 15s ease infinite;
        }

        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .admin-only {
            display: none !important;
        }

        body.admin-mode .admin-only {
            display: inline-flex !important;
        }

        body.admin-mode .admin-only-table {
            display: table-cell !important;
        }
    </style>
</head>

<body class="bg-gray-50 font-sans">

    <nav class="fixed top-4 left-0 right-0 z-50 px-4">
        <div class="container mx-auto glass rounded-2xl p-4 flex justify-between items-center shadow-2xl text-white">
            <h1 class="text-xl font-black tracking-tighter uppercase italic">Scam<span class="text-red-500">Watch</span>
            </h1>
            <div class="hidden md:flex items-center space-x-6 text-[10px] font-black tracking-widest uppercase">
                <a href="#analyzer" class="hover:text-red-500 transition">Email Analyzer</a>
                <a href="#database" class="hover:text-red-500 transition">Database</a>
                <a href="#report" class="hover:text-red-500 transition">Report</a>
            </div>
            <div class="flex items-center space-x-4">
                <button onclick="toggleAdmin()" id="adminBtn"
                    class="text-[10px] border border-white/20 px-4 py-1.5 rounded-full hover:bg-white/10 transition font-bold tracking-widest">
                    <i class="fas fa-lock mr-1"></i> ADMIN: OFF
                </button>
            </div>
        </div>
    </nav>

    <header class="mesh-bg pt-48 pb-32 px-4 text-center text-white relative">
        <div class="absolute inset-0 bg-slate-900/40"></div>
        <div class="container mx-auto relative z-10">
            <h2 class="text-5xl md:text-7xl font-black mb-6 tracking-tight italic">Detect. <span
                    class="text-red-500">Protect.</span></h2>
            <p class="text-gray-400 text-lg max-w-xl mx-auto font-medium mb-10">Advanced tools to analyze suspicious job
                offers and maintain the community scam blacklist.</p>
            <a href="#analyzer"
                class="bg-white text-slate-900 px-8 py-4 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-red-500 hover:text-white transition-all shadow-2xl">Start
                Email Analysis</a>
        </div>
    </header>

    <main class="container mx-auto py-12 px-4">

        <section id="analyzer" class="mb-20">
            <div class="bg-white rounded-[3rem] p-8 md:p-12 shadow-2xl border border-gray-100 max-w-5xl mx-auto">
                <div class="text-center mb-10">
                    <h3 class="text-3xl font-black text-slate-900 mb-2">Offer Analyzer v1.0</h3>
                    <p class="text-gray-500">Paste the job offer email below to detect high-risk patterns.</p>
                </div>

                <div class="space-y-6">
                    <textarea id="emailInput" rows="6"
                        placeholder="Paste the full email text here (e.g., 'We saw your resume on LinkedIn. Pay is $50/hr...')"
                        class="w-full bg-gray-50 border-2 border-dashed border-gray-200 p-6 rounded-[2rem] outline-none focus:border-red-500 transition font-medium text-slate-700"></textarea>

                    <button onclick="analyzeEmail()"
                        class="w-full bg-slate-900 text-white p-6 rounded-[2rem] font-black text-lg hover:bg-red-600 transition-all shadow-xl active:scale-95">
                        <i class="fas fa-microscope mr-2"></i> ANALYZE OFFER
                    </button>
                </div>

                <div id="analysisResult" class="hidden mt-10 p-8 rounded-[2rem] border-2 animate-pulse">
                </div>
            </div>
        </section>

        <section id="database" class="mb-8">
            <div
                class="flex flex-col lg:flex-row justify-between items-center gap-4 bg-white p-5 rounded-3xl shadow-sm border border-gray-100">
                <div class="flex flex-1 w-full gap-3">
                    <input type="text" id="searchInput" onkeyup="filterTable()" placeholder="Search blacklist..."
                        class="flex-1 border-none p-4 rounded-2xl bg-gray-50 focus:ring-2 focus:ring-red-500 outline-none text-sm font-medium">
                </div>
                <div class="admin-only flex gap-2 w-full lg:w-auto">
                    <button onclick="document.getElementById('csvInput').click()"
                        class="bg-green-50 text-green-600 px-5 py-3 rounded-2xl font-black text-[10px] uppercase">Import
                        CSV</button>
                    <input type="file" id="csvInput" class="hidden" accept=".csv" onchange="importCSV(event)">
                    <button onclick="exportToCSV()"
                        class="bg-blue-50 text-blue-600 px-5 py-3 rounded-2xl font-black text-[10px] uppercase">Export
                        CSV</button>
                </div>
            </div>
        </section>

        <section class="bg-white rounded-[2.5rem] shadow-2xl overflow-hidden border border-gray-100 mb-20">
            <table class="w-full text-left">
                <thead class="bg-gray-50/50 text-gray-400 text-[10px] font-black uppercase tracking-widest">
                    <tr>
                        <th class="p-8">Entity</th>
                        <th class="p-8">Status</th>
                        <th class="p-8 admin-only-table hidden text-right">Actions</th>
                    </tr>
                </thead>
                <tbody id="scam-list" class="text-sm"></tbody>
            </table>
        </section>

        <section id="report" class="bg-slate-900 p-12 rounded-[4rem] text-white shadow-3xl max-w-4xl mx-auto">
            <h3 class="text-3xl font-black mb-6">Manually Report</h3>
            <form id="scamForm" class="space-y-6">
                <input type="text" id="name" required placeholder="Company or Email Name"
                    class="w-full bg-white/5 border border-white/10 p-5 rounded-3xl outline-none focus:border-red-500 transition">
                <select id="type" class="w-full bg-white/5 border border-white/10 p-5 rounded-3xl outline-none">
                    <option class="bg-slate-900">Check Cashing</option>
                    <option class="bg-slate-900">Phishing</option>
                    <option class="bg-slate-900">Equipment Fee</option>
                </select>
                <button type="submit"
                    class="w-full bg-red-600 p-6 rounded-[2rem] font-black text-xl hover:bg-red-700 transition-all">Submit
                    to Blacklist</button>
            </form>
        </section>
    </main>

    <script>
        // ANALYZER LOGIC
        function analyzeEmail() {
            const text = document.getElementById('emailInput').value.toLowerCase();
            const resultDiv = document.getElementById('analysisResult');
            let score = 0;
            let flags = [];

            if (text.length < 10) return alert("Please paste more text to analyze.");

            // Red Flag Rules
            if (text.includes("telegram") || text.includes("whatsapp") || text.includes("signal app")) {
                score += 40; flags.push("Messaging App Interview (High Risk)");
            }
            if (text.includes("$") && (text.includes("hour") || text.includes("hr")) && text.match(/\b([4-9][0-9]|1[0-9]{2})\b/)) {
                score += 30; flags.push("Unrealistic Salary for Role");
            }
            if (text.includes("check") && text.includes("equipment") || text.includes("office supplies")) {
                score += 50; flags.push("Check Cashing Scam Pattern");
            }
            if (text.includes("gmail.com") || text.includes("outlook.com") || text.includes("yahoo.com")) {
                score += 20; flags.push("Non-corporate Email Domain");
            }
            if (text.includes("urgent") || text.includes("immediately") || text.includes("kindly")) {
                score += 10; flags.push("Suspicious Urgency / Phrasing");
            }

            resultDiv.classList.remove('hidden', 'bg-green-50', 'border-green-200', 'bg-red-50', 'border-red-200', 'bg-yellow-50', 'border-yellow-200');
            resultDiv.style.animation = 'none';

            let risk = "LOW";
            let colorClass = "bg-green-50 border-green-200 text-green-800";

            if (score >= 60) { risk = "HIGH"; colorClass = "bg-red-50 border-red-200 text-red-800"; }
            else if (score >= 30) { risk = "MEDIUM"; colorClass = "bg-yellow-50 border-yellow-200 text-yellow-800"; }

            resultDiv.classList.add(...colorClass.split(' '));
            resultDiv.innerHTML = `
                <div class="flex flex-col items-center">
                    <span class="text-xs font-black uppercase tracking-widest mb-2">Analysis Result</span>
                    <div class="text-6xl font-black mb-4">${risk} RISK</div>
                    <div class="w-full space-y-2 text-left">
                        <p class="font-bold border-b border-current pb-2 mb-2 italic">Detected Red Flags:</p>
                        ${flags.length > 0 ? flags.map(f => `<div class="text-sm font-medium">● ${f}</div>`).join('') : '<div class="text-sm">No obvious red flags detected. Still exercise caution.</div>'}
                    </div>
                </div>
            `;
        }

        // DATABASE LOGIC (REUSED FROM BEFORE)
        const defaultData = [
            { name: "Global HR (Fake)", type: "Phishing", date: "Feb 20, 2026", status: "Confirmed Scam", sClass: "text-red-500" }
        ];

        function loadScams() {
            const list = document.getElementById('scam-list');
            const data = JSON.parse(localStorage.getItem('scamData')) || defaultData;
            list.innerHTML = data.map((s, i) => `
                <tr class="border-b border-gray-50">
                    <td class="p-8 font-black text-slate-800">${s.name} <br><span class="text-[10px] text-gray-400 font-medium uppercase">${s.type}</span></td>
                    <td class="p-8"><span class="${s.sClass} font-black text-[10px] uppercase">● ${s.status}</span></td>
                    <td class="p-8 admin-only-table hidden text-right">
                        <button onclick="deleteItem(${i})" class="text-gray-300 hover:text-red-500"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            `).join('');
        }

        function toggleAdmin() {
            document.body.classList.toggle('admin-mode');
            const isAdmin = document.body.classList.contains('admin-mode');
            document.getElementById('adminBtn').innerHTML = isAdmin ? '<i class="fas fa-unlock mr-1"></i> ADMIN: ON' : '<i class="fas fa-lock mr-1"></i> ADMIN: OFF';
        }

        function deleteItem(index) {
            let data = JSON.parse(localStorage.getItem('scamData')) || defaultData;
            data.splice(index, 1);
            localStorage.setItem('scamData', JSON.stringify(data));
            loadScams();
        }

        document.getElementById('scamForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const newItem = {
                name: document.getElementById('name').value,
                type: document.getElementById('type').value,
                date: new Date().toLocaleDateString(),
                status: "Pending Review",
                sClass: "text-gray-400"
            };
            let data = JSON.parse(localStorage.getItem('scamData')) || defaultData;
            data.unshift(newItem);
            localStorage.setItem('scamData', JSON.stringify(data));
            loadScams();
            this.reset();
        });

        window.onload = loadScams;
    </script>
</body>

</html>